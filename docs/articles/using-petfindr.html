<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Petfindr: Find Pets in R! • PetFindr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Petfindr: Find Pets in R!">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PetFindr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/using-petfindr.html">Petfindr: Find Pets in R!</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Petfindr: Find Pets in R!</h1>
            
      
      
      <div class="hidden name"><code>using-petfindr.Rmd</code></div>

    </div>

    
    
<div id="in-this-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#in-this-vignette" class="anchor"></a>In This Vignette</h2>
<ul>
<li>Introducing <code>PetFindr</code>
</li>
<li>Getting Started
<ul>
<li>Authentication<br>
</li>
</ul>
</li>
<li>Usage
<ul>
<li>Functions</li>
<li>Examples Using Sample Data</li>
<li>Shiny</li>
<li>Further Reading</li>
</ul>
</li>
</ul>
</div>
<div id="introducing-petfindr" class="section level2">
<h2 class="hasAnchor">
<a href="#introducing-petfindr" class="anchor"></a>Introducing <code>PetFindr</code>
</h2>
<p>The goal of ‘PetFindr’ is to provide a fast and friendly way to extract data from <a href="https://www.petfinder.com/" class="uri">https://www.petfinder.com/</a>, which is the largest online pet adoption website, and to facilitate data analysis and other tasks from the extracted data.<br>
The package provides a useful tool to enable R users to search for their favorite pets in their own R session, and to browse pictures of the pets. All of this is possible thanks to API (Application Programming Interface) which is a set of instructions and standards for accessing structured information on the web. The Petfinder website provides us with an API that allows us to access the Petfinder database of hundreds of thousands of pets ready for adoption and over ten thousand animal welfare organizations.<br>
This vignette introduces and walks through the package,<code>PetFindr</code>, and the Petfinder API for authenticating and extracting data from the database.<br></p>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h2>
<p>First, install and load the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"earl88/PetFindr"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(PetFindr)</code></pre></div>
<div id="authentication" class="section level3">
<h3 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h3>
<p>In order to begin, a user needs a secure authentication.<br>
To get unique <code>key</code> and <code>secret</code> from the API website, the user has to create an account on <a href="https://www.petfinder.com/user/register/">Petfinder</a>.<br><code>pf_setup</code> function will guide the user through whole process to initialize the API connection to Petfinder.<br>
Running this function will open a browser to “<a href="https://www.petfinder.com/developers/" class="uri">https://www.petfinder.com/developers/</a>” and prompt the user to register for Petfinder’s API (V2).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pf_setup.html">pf_setup</a></span>()</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/setup_message.png" width="40%"></p>
<p>If the user responsds “yes”, <code>pf_setup</code> will load PetFinder register website into an HTML browser.<br>
After registration, a Petfinder API <code>key</code> and <code>secret</code> can be requested in www.petfinder.com/developers.<br>
The uniqe <code>key</code> and <code>secret</code> will be used to request an access token to Petfinder API.</p>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/secretandkey.png" width="40%"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pf_save_credentials.html">pf_save_credentials</a></span>(key, secret)</code></pre></div>
<p>Once the user creates an account on <a href="https://www.petfinder.com/">Petfinder</a> and receive a unique <code>key</code> and a <code>secret</code>, the user now can use the function <code>petfindr_save_credentials()</code> to store their key and secret to your .Rprofile so that you do not have to run <code><a href="../reference/pf_save_credentials.html">pf_save_credentials(key, secret)</a></code> everytime you use the package.<br>
Using <code><a href="../reference/pf_save_credentials.html">pf_save_credentials(key, secret)</a></code> makes it easier to access the API in the future, but this function is not required to access the database.<br>
In order to maintain security, the user needs to take one more step, which is requesting an access token to get an access to API database.<br></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pf_accesstoken.html">pf_accesstoken</a></span>(key, secret)</code></pre></div>
<p>Once the user uses <code>key</code> and <code>secret</code> as the inputs of <code><a href="../reference/pf_accesstoken.html">pf_accesstoken()</a></code>, the user now have an access to the Petfinder servers and can start his/her own query to find future pets.<br>
The token has to be requested every hour.<br>
Finally, The <a href="https://www.petfinder.com/developers/v2/docs/">Petfinder API v2.0</a> are now accessible through R!</p>
</div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The Petfinder API allows users to search and view pet listings based on pet characteristics, location, and status. In addition, they can search for and display animal shelters based on the organization’s name, ID, and location.<br>
The following section introduces the functions in <code>PetFindr</code> package and how to interact with the Petfinder API with some cute examples of extracting data from the database.<br>
The examples are mainly split into pet, shelter, photo-viewing functions.</p>
<div id="functions" class="section level3">
<h3 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h3>
<div id="pf_find_pets" class="section level4">
<h4 class="hasAnchor">
<a href="#pf_find_pets" class="anchor"></a><code>pf_find_pets</code>
</h4>
<p><code>pf_find_pets</code> allows users to retrieve a dataframe of information about pets that are listed on Petfinder.com. Filter searches are based on characteristics of animals such as animal type, breed, and gender, and organization information such as IDs, location, and distance from the selected location. Users can also make specific request to the database such as the maximum number of pets in the output and type of data sorting (e.g., most recent, the closest from the location, or random). By including a dash in the R command (e.g., “-recent”, “-distance”), a reverse-order sort is also available. For more details, list of input arguments can be found <a href="https://earl88.github.io/PetFindr/reference/index.html">here</a>.</p>
<p>Let’s say a user would like to find a list of female cats in Austin, Texas, and then one can use this function with a valid token as shown in the code below. Note that in the following example, only some of variables are shown since otherwise the output will be very wide due to the string of links in the dataframe.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="kw"><a href="../reference/pf_find_pets.html">pf_find_pets</a></span>(token, <span class="dt">type =</span> <span class="st">"cat"</span>, <span class="dt">gender =</span> <span class="st">"female"</span>, <span class="dt">location =</span> <span class="st">"Austin, TX"</span>, <span class="dt">page =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(organization_id, type, breeds.primary, age, gender, size, name, status) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="dt">n =</span> <span class="dv">5</span>)</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/pf_find_pets.png" width="30%"></p>
</div>
</div>
<div id="list-types-and-breeds-of-pets" class="section level3">
<h3 class="hasAnchor">
<a href="#list-types-and-breeds-of-pets" class="anchor"></a>List types and breeds of pets</h3>
<p>Two functions <code>pf_list_types</code> and <code>pf_list_breeds</code> return a list of all available types and breeds of pets on the Petfinder API. If output lists all available information on types and breeds of animals, it would take a huge amount of time for a user to filter the information he/she is actually looking for. Or, sometimes a user does not know what kind of information can be extracted using the functions. Note that there is alimiting number fo daily queries, the developers made the functions below to make the searching process easier.</p>
<div id="pf_list_types" class="section level4">
<h4 class="hasAnchor">
<a href="#pf_list_types" class="anchor"></a><code>pf_list_types</code>
</h4>
<p><code>pf_list_types</code> returns a dataframe with all available animal types from Petfinder.com, along with each type’s available coat, color, and gender options. There is only one argument required for this function which is user’s <code>token</code>. Then a tibble listing all available types with thier respective coat, color, and gender is returned by this function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pf_list_types.html">pf_list_types</a></span>(<span class="dt">token =</span> token)
<span class="kw"><a href="../reference/pf_list_types.html">pf_list_types</a></span>(<span class="dt">token =</span> token)<span class="op">$</span>names</code></pre></div>
<p>Anytime users call for the type of pets, the function makes a query to the API and lists all types of pets based on the latest information. There is also a list of types of pets available in the package called <code>pf_types</code> which can be used; however, this data set is not up-to-date and it is just a static data set created on April 2019. For more details of such sample datasets, please refer to the next section.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"pf_types"</span>, <span class="dt">package =</span> <span class="st">"PetFindr"</span>)</code></pre></div>
</div>
<div id="pf_list_breeds" class="section level4">
<h4 class="hasAnchor">
<a href="#pf_list_breeds" class="anchor"></a><code>pf_list_breeds</code>
</h4>
<p><code>pf_list_breeds</code> lists all available breeds of each specific type of pet listed in users’ R session and allows the user to specify an animal type found on Petfinder.com and returns a vector containing all available breeds for that animal type. Similar to <code>pf_list_type</code>, users’ token is required for this function as the first input. The type of the pet must be also specified by the users. The output is a character vector containing the breed names for the specified animal type is given by the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># error animal type must be specified</span>
<span class="kw"><a href="../reference/pf_list_breeds.html">pf_list_breeds</a></span>(<span class="dt">token =</span> token)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pf_list_breeds.html">pf_list_breeds</a></span>(<span class="dt">token =</span> token, <span class="dt">type =</span> <span class="st">"Scales, Fins &amp; Other"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Listing all available dog "Retriever" </span>
dog_breeds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pf_list_breeds.html">pf_list_breeds</a></span>(<span class="dt">token =</span> token, <span class="dt">type =</span> <span class="st">"dog"</span>)
dog_breeds[stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(dog_breeds, <span class="dt">pattern =</span> <span class="st">"Retriever"</span>) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>]</code></pre></div>
<p>Similar to <code>pf_types</code> dataset, there is also an static sample dataset of pet breeds available in the package called <code>pf_breeds</code> which can be used; however, to have the most recent breeds listed in R, <code>pf_list_breeds</code> needs to be called.</p>
</div>
<div id="pf_map_locations" class="section level4">
<h4 class="hasAnchor">
<a href="#pf_map_locations" class="anchor"></a><code>pf_map_locations</code>
</h4>
<p><code>pf_map_locations</code> displays the location of animal shelters on a Leaflet map, and requires the token and a dataframe of animal information from <code>pf_find_pets</code>, as inputs. Once a user obtains an animal dataframe, <code>pf_map_locations</code> uses the collection of the organization IDs of those pets to make a GET request. With the GET request, the ZIP codes of those organizations are collected, and the location of the organizations are shown on a Leaflet map according to their ZIP code. That’s why the token is required to use the function.</p>
<p>The following code will display markers on a leaflet map, which are the locations of the animal shelters of the first 10 puppies stored in the dataset, <code>LA_puppies</code> which is one of the sample datasets. Such sample datasets as well as <code>LA_puppies</code> will be explained in the next section. The snapshot of the map is shown below.</p>
<p>Note that only one or a few of organizations would be shown if some of animals are from the same shelters, and none of them will be marked if the location of the organization is not updated or provided from the Peftinder API.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(LA_puppies, <span class="dt">package =</span> <span class="st">"PetFindr"</span>)
<span class="kw"><a href="../reference/pf_map_locations.html">pf_map_locations</a></span>(token, LA_puppies[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,])</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/snapshot_map_LA_puppies10.png" width="25%"></p>
</div>
<div id="pf_find_organizations" class="section level4">
<h4 class="hasAnchor">
<a href="#pf_find_organizations" class="anchor"></a><code>pf_find_organizations</code>
</h4>
<p><code>pf_find_organizations</code> retrieves a dataframe of information about organizations that are listed on Petfinder.com. Filter searches based on location, which can be specified by one of the following three ways: a postal code, “city-name, state-abbreviation”, or latitude and longitude. Users can also search for organizations within distance of the location by “distance” input as well as a country in which the organizations are by “country” input. Users also can choose what type of pre-sorted pages on Petfinder.com the information should be imported.date listed on Petfinder.com, the distance from the location specified in ascending or descending order, or randomly where the default setting is “recent”, which is related to the date listed on Petfinder.com.</p>
<p>In the following examples with a valid token, the information of 100 organizations in US in the alphabetical order of states in the first page on the website, and of the first 20 organizations by default within 50 miles in Minneaplis, MN in the order of recent date listed will be returned, respectively.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">US_orgs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pf_find_organizations.html">pf_find_organizations</a></span>(token, <span class="dt">country =</span> <span class="st">"US"</span>, <span class="dt">limit =</span> <span class="dv">100</span>, <span class="dt">sort =</span> <span class="st">"state"</span>)
MN_orgs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pf_find_organizations.html">pf_find_organizations</a></span>(token, <span class="dt">location =</span> <span class="st">"Minneapolis, MN"</span>, <span class="dt">distance =</span> <span class="dv">50</span>)</code></pre></div>
</div>
<div id="pf_view_photos" class="section level4">
<h4 class="hasAnchor">
<a href="#pf_view_photos" class="anchor"></a><code>pf_view_photos</code>
</h4>
<p><code>pf_view_photos</code> presents the photos of searched pets in a slideshow format where it uses a dataframe of animal information from <code>pf_find_pets</code>, and the size of photos as inputs. Since the sizes of photos provided from the Petfinder website are “small”, “medium”, “large”, and “full”, one or more of them can be specified, and all sizes of photos will be shown by the default. In case there is no photo in the animal dataframe, an error message, “No photos found :(”, will be printed. The following example of code will show a slideshow of small photos of puppies in LA.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(LA_puppies, <span class="dt">package =</span> <span class="st">"PetFindr"</span>)
<span class="kw"><a href="../reference/pf_view_photos.html">pf_view_photos</a></span>(LA_puppies[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,], <span class="dt">size =</span> <span class="st">"small"</span>)</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/pupphotos.gif" width="25%"></p>
</div>
</div>
<div id="examples-using-sample-data" class="section level3">
<h3 class="hasAnchor">
<a href="#examples-using-sample-data" class="anchor"></a>Examples Using Sample Data</h3>
<p>The developers have stored sample datasets extracted from Petfinder,<br>
because it can be useful to include example datasets in the R package, to illustrate how the datasets are structures and how it can be leveraged to explore your interests in pets.<br>
The datasets in the package are immediately available when the package is loaded.</p>
<div id="sample-data-puppies-in-los-angeles" class="section level4">
<h4 class="hasAnchor">
<a href="#sample-data-puppies-in-los-angeles" class="anchor"></a>Sample data: Puppies in Los Angeles</h4>
<p>The dataset summarises information of 500 puppies in Greater Los Angeles area extracted from Petfinder on April 25, 2019. Output below is the first observation from the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">LA_puppies <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="dt">n =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(id, organization_id, type, species, name,age,gender, size, status)
<span class="co">#&gt;         id organization_id type species  name  age gender   size    status</span>
<span class="co">#&gt; 1 44543735           CA448  Dog     Dog  Cola Baby Female Medium adoptable</span>
<span class="co">#&gt; 2 44543736           CA448  Dog     Dog   Pop Baby   Male Medium adoptable</span>
<span class="co">#&gt; 3 44541265          CA2510  Dog     Dog Clyde Baby   Male Medium adoptable</span>
<span class="co">#&gt; 4 44541241          CA1066  Dog     Dog  Echo Baby   Male Medium adoptable</span>
<span class="co">#&gt; 5 44541240          CA1066  Dog     Dog Ernie Baby   Male Medium adoptable</span></code></pre></div>
<p>Note the output does not show every column in the sample dataset (otherwise the table would be very wide). Detailed information on the variables can be found <a href="https://earl88.github.io/PetFindr/reference/index.html">here</a>. Using the data, a user can perform various kinds of explanatory data analysis. For example, if a user wants to know what breed is the most common breed of dogs can be found in the animal shelters at Los Angeles. Top 10 breeds in Los Angeles area on April 2019 would be</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sort">sort</a></span>(<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(LA_puppies<span class="op">$</span>breeds.primary)))[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]
<span class="co">#&gt;  [1] "Chihuahua"           "Terrier"             "German Shepherd Dog"</span>
<span class="co">#&gt;  [4] "Labrador Retriever"  "Pug"                 "Shepherd"           </span>
<span class="co">#&gt;  [7] "Maltese"             "Dachshund"           "Pit Bull Terrier"   </span>
<span class="co">#&gt; [10] "Husky"</span></code></pre></div>
<p>The result can also be visualized as below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top10 &lt;-<span class="st"> </span>LA_puppies <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(breeds.primary <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Chihuahua"</span>,<span class="st">"Terrier"</span>,<span class="st">"German Shepherd Dog"</span>,<span class="st">"Labrador Retriever"</span> ,<span class="st">"Pug"</span> ,<span class="st">"Shepherd"</span>, <span class="st">"Maltese"</span> ,<span class="st">"Dachshund"</span> ,<span class="st">"Pit Bull Terrier"</span>,<span class="st">"Husky"</span> ))
## Reorder puppies by frequency
top10 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/with">within</a></span>(top10, 
                   breeds.primary &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(breeds.primary, 
                                      <span class="dt">levels=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sort">sort</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(breeds.primary), 
                                                        <span class="dt">decreasing=</span><span class="ot">TRUE</span>))))
## Create a bar plot
top10 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> breeds.primary, <span class="dt">fill =</span> gender)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_bar">geom_bar</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/coord_flip">coord_flip</a></span>()</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/commonbreeds.png" width="40%"></p>
<p>Through a visualization, the user can conclude that these are the most common puppy breeds (top 10) found at LA animal shelters. Or, a user can conduct a time series analysis. Let’s create a time series plot to see when the animals are posted on Petfinder.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Create a time variable
LA_puppies<span class="op">$</span>published_at &lt;-<span class="st"> </span>lubridate<span class="op">::</span><span class="kw"><a href="http://lubridate.tidyverse.org/reference/date.html">date</a></span>(<span class="kw">ymd_hms</span>(LA_puppies<span class="op">$</span>published_at))
LA_puppies <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(published_at) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> published_at, <span class="dt">y =</span> n)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/labs">ggtitle</a></span>(<span class="st">"Time Series of Animal Posting in LA"</span>) <span class="op">+</span>
<span class="st">           </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/labs">xlab</a></span>(<span class="st">"Date"</span>) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/labs">ylab</a></span>(<span class="st">"Number of Postings"</span>)</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/nyorgstimeseries.png" width="40%"></p>
</div>
<div id="sample-data-shelters-in-new-york-state" class="section level4">
<h4 class="hasAnchor">
<a href="#sample-data-shelters-in-new-york-state" class="anchor"></a>Sample data: Shelters in New York State</h4>
<p>The dataset summarises the list of animal sheters in New York State extracted on April 2019.<br>
Output below is the first observation from the dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">NY_orgs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="dt">n =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(id, name, phone)
<span class="co">#&gt;       id                         name           phone</span>
<span class="co">#&gt; 1 NY1351           Zero Stray Pawject  (917) 929-5756</span>
<span class="co">#&gt; 2  NY606 Zanis Furry Friends ZFF, Inc            &lt;NA&gt;</span>
<span class="co">#&gt; 3  NY995       Yorkie911 Rescue, Inc. 631-965-6418   </span>
<span class="co">#&gt; 4  NY716  Yonkers Humane Society Inc.  (914) 751-7870</span>
<span class="co">#&gt; 5   NY63       Yonkers Animal Shelter  (201) 981-3215</span></code></pre></div>
<p>Note the output does not show every column in the sample dataset (otherwise the table would be very wide). Detailed information on the variables can be found <a href="https://earl88.github.io/PetFindr/reference/index.html">here</a> Similar explanatory analysis can be conducted for the dataset as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top10_orgs &lt;-<span class="st"> </span>NY_orgs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(address.city <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"New York"</span>,<span class="st">"Brooklyn"</span>,<span class="st">"Rochester"</span>, <span class="st">"Albany"</span>,        <span class="st">"Staten Island"</span>, <span class="st">"Buffalo"</span> ,<span class="st">"Flushing"</span>,<span class="st">"Binghamton"</span>,<span class="st">"Syracuse"</span>,<span class="st">"Bronx"</span>))
top10_orgs &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/with">within</a></span>(top10_orgs, 
                   address.city &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(address.city, 
                                      <span class="dt">levels=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sort">sort</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/table">table</a></span>(address.city), 
                                                        <span class="dt">decreasing=</span><span class="ot">TRUE</span>))))
top10_orgs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> address.city)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_bar">geom_bar</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/coord_flip">coord_flip</a></span>()</code></pre></div>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/sheltersinny.png" width="40%"></p>
<p>The bar plot indicates that most of the shelters in New York state is located in New York city.</p>
</div>
</div>
<div id="shiny" class="section level3">
<h3 class="hasAnchor">
<a href="#shiny" class="anchor"></a>Shiny</h3>
<p>The Shiny is a convenient way to explore data through an interactive user interface in the user’s default browser straight from R. This section of the vignette will present a couple of examples to show users how to explore Petfinder using R Shiny.<br>
Detailed information on R Shiny could be found <a href="https://shiny.rstudio.com/">here</a>. A user also needs an authentication to use the Shiny because Shiny extracts data from real-time information from the API.<br>
The app includes multiple ways to extract and visualize data from Petfinder. All of the outputs on the Shiny app can be created directly in R as well. To run the app, load the <code>PetFindr</code> package, and run the <code><a href="../reference/pf_run_Shiny.html">pf_run_Shiny()</a></code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(PetFindr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(shiny)
<span class="kw"><a href="../reference/pf_run_Shiny.html">pf_run_Shiny</a></span>()</code></pre></div>
<p>The computer’s default browser will open up and display the following pages:</p>
<div id="authentication-1" class="section level4">
<h4 class="hasAnchor">
<a href="#authentication-1" class="anchor"></a>Authentication</h4>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/shiny_main.png" width="40%"></p>
<p>To ensure that the users are registered and have their own <code>key</code> and <code>secret</code>, the main page of the Shiny app shows a short instruction to let the users know that <code>key</code> and <code>secret</code> are required to use the Shiny app and the token has to be regenerated every hour.<br>
The shiny app also detects invalid <code>key</code> and <code>secret</code>.</p>
</div>
<div id="search-by-animals" class="section level4">
<h4 class="hasAnchor">
<a href="#search-by-animals" class="anchor"></a>Search by Animals</h4>
<p>After the users are granted to access the API, they can search animals as below.</p>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/shiny2.png" width="40%"></p>
<p>The first tab is divided into 4 main sections: The left sidebar is used to input the required information (location, search radius, types of animals, breeds of animals, adoption status, number of pets in the output) to request the AP to search for pets that meet certain criteria. Three types of queries can be made in location. A postal code, city-name, state-abbreviation and latitude and longitde information. To select distance from the location, the location input must be specified first. <code>Pets in your location</code> is a table output that displays the list of pets from the output. The main visualization display section shows a leaflet output to visualize the location of the pets. Finally, if a user click one of the rows in <code>Pets in your location</code> table, app will display a picture of the selected animal. If the photo is unavailable, it will return an error message.</p>
</div>
<div id="search-by-organizations" class="section level4">
<h4 class="hasAnchor">
<a href="#search-by-organizations" class="anchor"></a>Search by Organizations</h4>
<p>Second tab allows users to find information on animal shelters and is also divided into 4 main sections.<br>
A user can search organization based on 3 criteria (location, search radius , and number of outputs.<br>
The main visualization display shows three types of information.<br>
First, it shows a leaflet map to visualize the location of the animal shelters,<br>
and the table below shows information from a selected shelter in the leaflet map.<br>
Finally, the bar graph summarizes the types and number of pets in the selected shelter.</p>
<p><img src="https://raw.githubusercontent.com/earl88/PetFindr/master/inst/FinalPresentation/images/orginfo.png" width="40%"></p>
</div>
</div>
<div id="further-reading" class="section level3">
<h3 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h3>
<ul>
<li>For further documentation on Petfinder APIs (v2), see <a href="https://www.petfinder.com/developers/v2/docs/" class="uri">https://www.petfinder.com/developers/v2/docs/</a>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#in-this-vignette">In This Vignette</a></li>
      <li><a href="#introducing-petfindr">Introducing <code>PetFindr</code></a></li>
      <li><a href="#getting-started">Getting Started</a></li>
      <li><a href="#usage">Usage</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Miranda Tilton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
